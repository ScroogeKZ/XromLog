#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ PHP –≤–µ—Ä—Å–∏–∏ –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã

echo "üöÄ –ó–∞–ø—É—Å–∫ –•–†–û–ú –õ–æ–≥–∏—Å—Ç–∏–∫–∞ (PHP –≤–µ—Ä—Å–∏—è)..."
echo "üìÑ URL: http://localhost:8080"
echo "üë§ –ê–¥–º–∏–Ω: admin / admin123"
echo "üë§ –°–æ—Ç—Ä—É–¥–Ω–∏–∫: employee1 / admin123"
echo ""

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
chmod +x start-php.sh

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ PHP
if ! command -v php &> /dev/null; then
    echo "‚ùå PHP –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PHP 8.0 –∏–ª–∏ –≤—ã—à–µ"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è PDO PostgreSQL
php -m | grep -i pdo_pgsql > /dev/null
if [ $? -ne 0 ]; then
    echo "‚ö†Ô∏è  –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ PDO PostgreSQL –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"
    echo "   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ php-pgsql —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
fi

# –°–æ–∑–¥–∞–µ–º –ø–∞–ø–∫—É –¥–ª—è –∑–∞–≥—Ä—É–∑–æ–∫, –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
mkdir -p uploads
chmod 755 uploads

echo "‚úÖ –ó–∞–ø—É—Å–∫ PHP —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –ø–æ—Ä—Ç—É 8080..."
php -S 0.0.0.0:8080 php-server.php